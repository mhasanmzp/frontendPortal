<!-- <ion-row>
  <ion-col *ngIf="((getTasksCount(epicTasksListOriginal, 'To Do')/epicTasksListOriginal.length)*(11.9)) > 0" [size]="toFixed(((getTasksCount(epicTasksListOriginal, 'To Do')/epicTasksListOriginal.length)*11.9))" style="background-color: #e74c3c;"> -->
    <!-- {{toFixed(((getTasksCount(epicTasksListOriginal, 'To Do')/epicTasksListOriginal.length)*11.9))}} -->
  <!-- </ion-col>
  <ion-col *ngIf="((getTasksCount(epicTasksListOriginal, 'In Progress')/epicTasksListOriginal.length)*(11.9)) > 0" [size]="toFixed(((getTasksCount(epicTasksListOriginal, 'In Progress')/epicTasksListOriginal.length)*11.9))" style="background-color: #f1c40f;"> -->
    <!-- {{toFixed(((getTasksCount(epicTasksListOriginal, 'In Progress')/epicTasksListOriginal.length)*11.9))}} -->
  <!-- </ion-col>
  <ion-col *ngIf="((getTasksCount(epicTasksListOriginal, 'Testing')/epicTasksListOriginal.length)*(11.9)) > 0" [size]="toFixed(((getTasksCount(epicTasksListOriginal, 'Testing')/epicTasksListOriginal.length)*11.9))" style="background-color: #3498db;"> -->
    <!-- {{toFixed(((getTasksCount(epicTasksListOriginal, 'Testing')/epicTasksListOriginal.length)*11.9))}} -->
  <!-- </ion-col>
  <ion-col *ngIf="((getTasksCount(epicTasksListOriginal, 'Done')/epicTasksListOriginal.length)*(11.9)) > 0" [size]="toFixed(((getTasksCount(epicTasksListOriginal, 'Done')/epicTasksListOriginal.length)*11.9))" style="background-color: #27ae60;"> -->
    <!-- {{toFixed(((getTasksCount(epicTasksListOriginal, 'Done')/epicTasksListOriginal.length)*12))}} -->
  <!-- </ion-col>
</ion-row> -->
<ion-row>
  <!-- <ion-col sizeLg="6" offsetLg="0">
    <ion-list>
      <ion-list-header>
        <ion-label>Project Health</ion-label>
      </ion-list-header>
      <div style="border: 1px solid var(--ion-color-light);">
        <ion-item>
          <ion-label>Total Tasks</ion-label>
          <ion-note slot="end">
            {{epicTasksListOriginal.length}}
          </ion-note>
        </ion-item>
        <ion-item style="border-left: 5px solid #e74c3c;">
          <ion-label>To Do</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'To Do')}}
          </ion-note>
        </ion-item>
        <ion-item style="border-left: 5px solid #f1c40f;">
          <ion-label>In Progress</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'In Progress')}}
          </ion-note>
        </ion-item>
        <ion-item style="border-left: 5px solid #3498db;">
          <ion-label>Testing</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Testing')}}
          </ion-note>
        </ion-item>
        <ion-item lines="none" style="border-left: 5px solid #27ae60;">
          <ion-label>Completed</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Done')}}
          </ion-note>
        </ion-item>
      </div>
    </ion-list>
  </ion-col> -->
  <!-- <ion-col sizeLg="6">
    <ion-list>
      <ion-list-header>
        <ion-label>Today's Updates</ion-label>
      </ion-list-header>
      <div style="border: 1px solid var(--ion-color-light);">
        <ion-item>
          <ion-label>New Tasks Opened </ion-label>
          <ion-note slot="end">
            {{getTasksCreatedToday()}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>Tasks Completed</ion-label>
          <ion-note slot="end">
            {{getTasksCompletedToday()}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>In Progress</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'In Progress')}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>Testing</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Testing')}}
          </ion-note>
        </ion-item>
        <ion-item lines="none">
          <ion-label>Completed</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Done')}}
          </ion-note>
        </ion-item> --
      </div>
    </ion-list>
  </ion-col> -->
  <!-- <ion-col sizeLg="4">
    <ion-list>
      <ion-list-header>
        <ion-label>Links</ion-label>
      </ion-list-header>
      <div style="border: 1px solid var(--ion-color-light);">
        <ion-item>
          <ion-label> Non - Btp DEV</ion-label>
          <ion-note slot="end">
            <ion-icon name="open-outline"></ion-icon>
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label> Non - Btp QA</ion-label>
          <ion-note slot="end">
            <ion-icon name="open-outline"></ion-icon>
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label> Non - Btp PROD</ion-label>
          <ion-note slot="end">
            <ion-icon name="open-outline"></ion-icon>
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label> Btp DEV</ion-label>
          <ion-note slot="end">
            <ion-icon name="open-outline"></ion-icon>
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label> Btp QA</ion-label>
          <ion-note slot="end">
            <ion-icon name="open-outline"></ion-icon>
          </ion-note>
        </ion-item>
      </div>
    </ion-list>
  </ion-col> -->


<!-- Active Sprints -->

<ion-col
  style="padding: 0px 20px 20px 20px" size="12"
>
<div style="text-align: center;padding-top:10%;" *ngIf="activeSprints.length === 0">
  <strong class="capitalize">No Active Sprints!</strong>
  <p>
    Select tasks from <b>List</b> tab to create a sprint.
    <!-- <a target="_blank" rel="noopener noreferrer" href="">Goto List Tab</a> -->
  </p>
</div>
<div *ngIf="activeSprints.length > 0">
  
  <div *ngFor="let sprint of activeSprints">
    <div (click)="viewSprintDetails(sprint)">
      <ion-item lines="none" style="background-color: var(--ion-color-light); margin-top: 20px">
        <ion-icon slot="start" name="apps-outline"></ion-icon>
        <ion-note slot="start">
          <span style="font-weight: bold; font-size: 20px"
            >S{{ sprint.sprintId }}</span
          >
          - {{ sprint.sprintName }}
        </ion-note>
        <ion-note slot="end">
          <div
            style="
              padding: 4px 10px;
              font-size: 14px;
              font-weight: bold;
              border-radius: 5px;
              color: var(--ion-color-dark) !important;
            "
          >
            Total Tasks: {{ getTasks(sprint).length }}
          </div>
        </ion-note>
        <ion-note slot="end">
          <div
            style="
              padding: 4px 10px;
              font-size: 14px;
              font-weight: bold;
              border-radius: 5px;
              color: var(--ion-color-dark) !important;
            "
          >
            Estimated Hours: {{ sprint['estimatedHours'] }}
          </div>
        </ion-note>
        <ion-note slot="end">
          <div
            style="
              padding: 4px 10px;
              font-size: 14px;
              font-weight: bold;
              border-radius: 5px;
              color: var(--ion-color-dark) !important;
            "
          >
            Actual Hours: {{ sprint['actualHours'] }}
          </div>
        </ion-note>
        <ion-note slot="end">
          <div
            style="
              padding: 4px 10px;
              font-size: 14px;
              font-weight: bold;
              border-radius: 5px;
              color: var(--ion-color-dark) !important;
            "
          >
          <span *ngIf="getDaysRemaining(sprint) > 0" style="color: var(--ion-color-success)">{{getDaysRemaining(sprint)}} days remaining</span>
          <span *ngIf="getDaysRemaining(sprint) === 0" style="color: var(--ion-color-danger)"> Due Today</span>
          <span *ngIf="getDaysRemaining(sprint) < 0" style="color: var(--ion-color-danger)">
             Overdue by {{-1*getDaysRemaining(sprint)}} Days
            </span>
          </div>
        </ion-note>
      </ion-item>
      <ion-item lines="none">
        <ion-chip *ngFor="let assignee of getSprintAssignees(sprint)">
          <ion-avatar>
            <img
              [src]="
                authService.apiUrl + 'images/' + assignee + '.png' ||
                authService.apiUrl + 'images/0.png'
              "
            />
          </ion-avatar>
          <ion-label>
            {{ sprint["sprintTasksAssignment"][assignee] }} Hrs</ion-label
          >
        </ion-chip>
        <ion-chip slot="end" style="font-weight: 400;background-color: #B1907F;margin-right: 1px;" *ngIf="holdPercentage !== '0.00'">
          <ion-label><small>{{ holdPercentage }}% OnHold</small></ion-label>
        </ion-chip>
        <ion-chip slot="end" style="font-weight: 400;margin-right: 1px;" *ngIf="pendingPercentage !== '0.00'">
          <ion-label><small>{{ pendingPercentage }}% Pending</small></ion-label>
        </ion-chip>
        <ion-chip slot="end" style="font-weight: 400;background-color: #e67e22;margin-right: 1px;" *ngIf="inProgressPercentage !== '0.00'">
          <ion-label><small>{{ inProgressPercentage }}% InProgress</small></ion-label>
        </ion-chip>
        <ion-chip slot="end" style="font-weight: 400;background-color: #2ecc71;margin-right: 1px;" *ngIf="donePercentage !== '0.00'">
          <ion-label><small>{{ donePercentage }}% Done</small></ion-label>
        </ion-chip>
        <ion-chip slot="end" style="font-weight: 400;background-color: #3498db;" *ngIf="testingPercentage !== '0.00'">
          <ion-label><small>{{ testingPercentage }}% Testing</small></ion-label>
        </ion-chip>
      </ion-item>
    </div>
    <div style="padding: 0px; padding-top: 0px">
      <table class="tg">
        <thead>
          <tr style="background-color: var(--ion-color-light)">
            <th class="tg-hpky">Id</th>
            <th class="tg-hpky">Epic</th>
            <th class="tg-hpky">Story</th>
            <th class="tg-hpky">Task</th>
            <!-- <th class="tg-hpky">Reporter</th> -->
            <th class="tg-hpky">Assignee</th>
            <th class="tg-hpky">Estimated Hours</th>
            <th class="tg-hpky">Status</th>
            <th class="tg-hpky">Priority</th>
            <!-- <th class="tg-hpky">Planned Start Date</th> -->
            <!-- <th class="tg-hpky">Created On</th> -->
            <!-- <th class="tg-hpky">Planned End Date</th> -->
          </tr>
        </thead>
        <tbody *ngIf="projectMembers.length > 0">
          <tr *ngFor="let epic of getTasks(sprint); index as i">
            <td
              class="tg-0pky"
              (click)="viewTaskDetails(epic, null)"
              [style.background]="
                getTeamBoardColumns(epic.columnId) === 'Done'
                  ? '#2ecc71'
                  : getTeamBoardColumns(epic.columnId) === 'In Progress'
                  ? '#e67e22'
                  : getTeamBoardColumns(epic.columnId) === 'Testing'
                  ? '#3498db'
                  : getTeamBoardColumns(epic.columnId) === 'Hold'
                  ? '#B1907F'
                  :''
              "
            >
              {{ epic.projectTaskNumber }}
            </td>
            <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">
              {{ epic.epicName }}
            </td>
            <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">
              {{ epic.storyName }}
            </td>
            <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">
              {{ epic.taskName }}
            </td>
            <!-- <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">{{getListAssigneeDetails(epic, 'reporter', 'firstName')}}</td> -->
            <td
              class="tg-0pky"
              (click)="viewTaskDetails(epic, null)"
              style="font-weight: bold"
            >
              {{ getListAssigneeDetails(epic, "assignee", "firstName") }}
            </td>
            <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">
              {{ epic.estimatedHours }}
            </td>
            <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">
              {{ getTeamBoardColumns(epic.columnId) }}
            </td>
            <!-- <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">{{epic.startDate}}</td> -->
            <td
              class="tg-0pky"
              (click)="viewTaskDetails(epic, null)"
              style="text-align: center; padding: 0px !important"
            >
              <ion-chip *ngIf="epic.priority === 2">
                <ion-icon
                  name="radio-button-on-outline"
                  color="danger"
                ></ion-icon>
                <ion-label>High</ion-label>
              </ion-chip>
              <ion-chip *ngIf="epic.priority === 1">
                <ion-icon
                  name="radio-button-on-outline"
                  color="warning"
                ></ion-icon>
                <ion-label>Medium</ion-label>
              </ion-chip>
              <ion-chip *ngIf="epic.priority === 0">
                <ion-icon
                  name="radio-button-on-outline"
                  color="secondary"
                ></ion-icon>
                <ion-label>Low</ion-label>
              </ion-chip>
              <ion-chip *ngIf="epic.priority === 3">
                <ion-icon
                  name="radio-button-on-outline"
                  color="primary"
                ></ion-icon>
                <ion-label>Hold</ion-label>
              </ion-chip>
            </td>
            <!-- <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">{{epic.createdAt | date:'dd MMM'}}</td> -->
            <!-- <td class="tg-0pky" (click)="viewTaskDetails(epic, null)">{{epic.dueDate}}</td> -->
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  </div>
</ion-col>
<!-- Active Sprints -->

  <!-- <ion-col sizeLg="12" offsetLg="0">
    <ion-list>
      <ion-list-header>
        <ion-label>Tasks Completed Today</ion-label>
      </ion-list-header>
      <div style="border: 1px solid var(--ion-color-light);">
        <table class="tg">
          <thead>
            <tr style="background-color: var(--ion-color-light);position: sticky; top:0px;">
              <th class="tg-hpky">Id</th>
              <th class="tg-hpky">Epic</th>
              <th class="tg-hpky">Story</th>
              <th class="tg-hpky">Task</th>
              <th class="tg-hpky">Created On</th>
              <th class="tg-hpky">Reporter</th>
              <th class="tg-hpky">Assignee</th>
              <th class="tg-hpky">Estimated Hours</th>
              <th class="tg-hpky">Planned Start Date</th>
              <th class="tg-hpky">Planned End Date</th>
            </tr>
          </thead>
          <tbody *ngIf="projectMembers.length > 0">
            <tr *ngFor="let epic of tasksCompletedToday; index as i" (click)="viewTaskDetails(epic, null)">
              <td class="tg-0pky"
                [style.background]="getTeamBoardColumns(epic.columnId) === 'Done'? '#2ecc71': get(epic.columnId) === 'In Progress'? '#e67e22': getTeamBoardColumns(epic.columnId) === 'Testing'? '#3498db':''">
                {{epic.taskId}}</td>
              <td class="tg-0pky">{{epic.epicName}}</td>
              <td class="tg-0pky">{{epic.storyName}}</td>
              <td class="tg-0pky">{{epic.taskName}}</td>
              <td class="tg-0pky">{{epic.createdAt | date:'dd MMM'}}</td>
              <td class="tg-0pky">{{getListAssigneeDetails(epic, 'reporter', 'firstName')}}</td>
              <td class="tg-0pky" style="font-weight: bold;">{{getListAssigneeDetails(epic, 'assignee', 'firstName')}}
              </td>
              <td class="tg-0pky">{{epic.estimatedHours}}</td>
              <td class="tg-0pky">{{epic.startDate}}</td>
              <td class="tg-0pky">{{epic.dueDate}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </ion-list>
  </ion-col> -->

  <!-- <ion-col sizeLg="3.4">
    <ion-list>
      <ion-list-header>
        <ion-label>Health</ion-label>
      </ion-list-header>
      <div style="border: 1px solid var(--ion-color-light);">
        <ion-item>
          <ion-label>Total Tasks</ion-label>
          <ion-note slot="end">
            {{epicTasksListOriginal.length}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>To Do</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'To Do')}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>In Progress</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'In Progress')}}
          </ion-note>
        </ion-item>
        <ion-item>
          <ion-label>Testing</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Testing')}}
          </ion-note>
        </ion-item>
        <ion-item lines="none">
          <ion-label>Completed</ion-label>
          <ion-note slot="end">
            {{getTasksCount(epicTasksListOriginal, 'Done')}}
          </ion-note>
        </ion-item>
      </div>
    </ion-list>
  </ion-col> -->
</ion-row>